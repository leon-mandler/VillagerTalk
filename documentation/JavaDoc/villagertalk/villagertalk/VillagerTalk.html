<!DOCTYPE HTML>
<html lang="de">
<head>
<!-- Generated by javadoc (21) on Thu Jun 20 00:35:18 CEST 2024 -->
<title>VillagerTalk</title>
<meta name="viewport" content="width=device-width, initial-scale=1">
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<meta name="dc.created" content="2024-06-20">
<meta name="description" content="declaration: package: villagertalk.villagertalk, class: VillagerTalk">
<meta name="generator" content="javadoc/ClassWriterImpl">
<link rel="stylesheet" type="text/css" href="../../stylesheet.css" title="Style">
<link rel="stylesheet" type="text/css" href="../../script-dir/jquery-ui.min.css" title="Style">
<script type="text/javascript" src="../../script.js"></script>
<script type="text/javascript" src="../../script-dir/jquery-3.6.1.min.js"></script>
<script type="text/javascript" src="../../script-dir/jquery-ui.min.js"></script>
</head>
<body class="class-declaration-page">
<script type="text/javascript">var pathtoroot = "../../";
loadScripts(document, 'script');</script>
<noscript>
<div>JavaScript ist im Browser deaktiviert.</div>
</noscript>
<div class="flex-box">
<header role="banner" class="flex-header">
<nav role="navigation">
<!-- ========= START OF TOP NAVBAR ======= -->
<div class="top-nav" id="navbar-top"><button id="navbar-toggle-button" aria-controls="navbar-top" aria-expanded="false" aria-label="Navigationslinks umschalten"><span class="nav-bar-toggle-icon">&nbsp;</span><span class="nav-bar-toggle-icon">&nbsp;</span><span class="nav-bar-toggle-icon">&nbsp;</span></button>
<div class="skip-nav"><a href="#skip-navbar-top" title="Navigations-Links überspringen">Navigations-Links überspringen</a></div>
<ul id="navbar-top-firstrow" class="nav-list" title="Navigation">
<li><a href="../../index.html">Überblick</a></li>
<li><a href="package-summary.html">Package</a></li>
<li class="nav-bar-cell1-rev">Klasse</li>
<li><a href="package-tree.html">Baum</a></li>
<li><a href="../../index-files/index-1.html">Index</a></li>
<li><a href="../../help-doc.html#class">Hilfe</a></li>
</ul>
<ul class="sub-nav-list-small">
<li>
<p>Übersicht:</p>
<ul>
<li>Verschachtelt</li>
<li><a href="#field-summary">Feld</a></li>
<li><a href="#constructor-summary">Konstruktor</a></li>
<li><a href="#method-summary">Methode</a></li>
</ul>
</li>
<li>
<p>Details:</p>
<ul>
<li><a href="#field-detail">Feld</a></li>
<li><a href="#constructor-detail">Konstruktor</a></li>
<li><a href="#method-detail">Methode</a></li>
</ul>
</li>
</ul>
</div>
<div class="sub-nav">
<div id="navbar-sub-list">
<ul class="sub-nav-list">
<li>Übersicht:&nbsp;</li>
<li>Verschachtelt&nbsp;|&nbsp;</li>
<li><a href="#field-summary">Feld</a>&nbsp;|&nbsp;</li>
<li><a href="#constructor-summary">Konstruktor</a>&nbsp;|&nbsp;</li>
<li><a href="#method-summary">Methode</a></li>
</ul>
<ul class="sub-nav-list">
<li>Details:&nbsp;</li>
<li><a href="#field-detail">Feld</a>&nbsp;|&nbsp;</li>
<li><a href="#constructor-detail">Konstruktor</a>&nbsp;|&nbsp;</li>
<li><a href="#method-detail">Methode</a></li>
</ul>
</div>
<div class="nav-list-search"><a href="../../search.html">SEARCH</a>
<input type="text" id="search-input" disabled placeholder="Suchen">
<input type="reset" id="reset-button" disabled value="reset">
</div>
</div>
<!-- ========= END OF TOP NAVBAR ========= -->
<span class="skip-nav" id="skip-navbar-top"></span></nav>
</header>
<div class="flex-content">
<main role="main">
<!-- ======== START OF CLASS DATA ======== -->
<div class="header">
<div class="sub-title"><span class="package-label-in-type">Package</span>&nbsp;<a href="package-summary.html">villagertalk.villagertalk</a></div>
<h1 title="Klasse VillagerTalk" class="title">Klasse VillagerTalk</h1>
</div>
<div class="inheritance" title="Vererbungsbaum"><a href="https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/lang/Object.html" title="Klasse oder Schnittstelle in java.lang" class="external-link">java.lang.Object</a>
<div class="inheritance">villagertalk.villagertalk.VillagerTalk</div>
</div>
<section class="class-description" id="class-description">
<dl class="notes">
<dt>Alle implementierten Schnittstellen:</dt>
<dd><code>net.fabricmc.api.ModInitializer</code></dd>
</dl>
<hr>
<div class="type-signature"><span class="modifiers">public class </span><span class="element-name type-name-label">VillagerTalk</span>
<span class="extends-implements">extends <a href="https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/lang/Object.html" title="Klasse oder Schnittstelle in java.lang" class="external-link">Object</a>
implements net.fabricmc.api.ModInitializer</span></div>
<div class="block">Main serverside class for the VillagerTalk mod
 <p>
 This class is responsible for handling the main logic of the mod, including
 handling the networking, generating responses, and processing commands.
 It also contains the main entry point for the mod.</div>
</section>
<section class="summary">
<ul class="summary-list">
<!-- =========== FIELD SUMMARY =========== -->
<li>
<section class="field-summary" id="field-summary">
<h2>Feldübersicht</h2>
<div class="caption"><span>Felder</span></div>
<div class="summary-table three-column-summary">
<div class="table-header col-first">Modifizierer und Typ</div>
<div class="table-header col-second">Feld</div>
<div class="table-header col-last">Beschreibung</div>
<div class="col-first even-row-color"><code>private static final <a href="https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/util/Map.html" title="Klasse oder Schnittstelle in java.util" class="external-link">Map</a><wbr>&lt;<a href="https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/util/UUID.html" title="Klasse oder Schnittstelle in java.util" class="external-link">UUID</a>,<wbr>net.minecraft.entity.passive.VillagerEntity&gt;</code></div>
<div class="col-second even-row-color"><code><a href="#activeVillagers" class="member-name-link">activeVillagers</a></code></div>
<div class="col-last even-row-color">
<div class="block">All villagers that are currently active.</div>
</div>
<div class="col-first odd-row-color"><code>private static final com.theokanning.openai.service.OpenAiService</code></div>
<div class="col-second odd-row-color"><code><a href="#APIService" class="member-name-link">APIService</a></code></div>
<div class="col-last odd-row-color">
<div class="block">The OpenAI API service used to generate responses</div>
</div>
<div class="col-first even-row-color"><code>static final <a href="https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/util/regex/Pattern.html" title="Klasse oder Schnittstelle in java.util.regex" class="external-link">Pattern</a></code></div>
<div class="col-second even-row-color"><code><a href="#CHANGE_EMERALD_AMOUNT" class="member-name-link">CHANGE_EMERALD_AMOUNT</a></code></div>
<div class="col-last even-row-color">&nbsp;</div>
<div class="col-first odd-row-color"><code>static final <a href="https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/util/regex/Pattern.html" title="Klasse oder Schnittstelle in java.util.regex" class="external-link">Pattern</a></code></div>
<div class="col-second odd-row-color"><code><a href="#CHANGE_ITEM_AMOUNT" class="member-name-link">CHANGE_ITEM_AMOUNT</a></code></div>
<div class="col-last odd-row-color">&nbsp;</div>
<div class="col-first even-row-color"><code>static final <a href="https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/util/regex/Pattern.html" title="Klasse oder Schnittstelle in java.util.regex" class="external-link">Pattern</a>[]</code></div>
<div class="col-second even-row-color"><code><a href="#COMMANDS" class="member-name-link">COMMANDS</a></code></div>
<div class="col-last even-row-color">&nbsp;</div>
<div class="col-first odd-row-color"><code>static final org.slf4j.Logger</code></div>
<div class="col-second odd-row-color"><code><a href="#LOGGER" class="member-name-link">LOGGER</a></code></div>
<div class="col-last odd-row-color">&nbsp;</div>
<div class="col-first even-row-color"><code>private static final <a href="https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/lang/String.html" title="Klasse oder Schnittstelle in java.lang" class="external-link">String</a></code></div>
<div class="col-second even-row-color"><code><a href="#MAYBE_SOME_KEY" class="member-name-link">MAYBE_SOME_KEY</a></code></div>
<div class="col-last even-row-color">&nbsp;</div>
<div class="col-first odd-row-color"><code>private static final <a href="https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/util/List.html" title="Klasse oder Schnittstelle in java.util" class="external-link">List</a><wbr>&lt;<a href="VillagerChatData.html" title="Klasse in villagertalk.villagertalk">VillagerChatData</a>&gt;</code></div>
<div class="col-second odd-row-color"><code><a href="#previousChats" class="member-name-link">previousChats</a></code></div>
<div class="col-last odd-row-color">
<div class="block">All previous chats from the current session.</div>
</div>
<div class="col-first even-row-color"><code>static final <a href="https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/util/regex/Pattern.html" title="Klasse oder Schnittstelle in java.util.regex" class="external-link">Pattern</a></code></div>
<div class="col-second even-row-color"><code><a href="#SPAWN_GOLEM" class="member-name-link">SPAWN_GOLEM</a></code></div>
<div class="col-last even-row-color">&nbsp;</div>
</div>
</section>
</li>
<!-- ======== CONSTRUCTOR SUMMARY ======== -->
<li>
<section class="constructor-summary" id="constructor-summary">
<h2>Konstruktorübersicht</h2>
<div class="caption"><span>Konstruktoren</span></div>
<div class="summary-table two-column-summary">
<div class="table-header col-first">Konstruktor</div>
<div class="table-header col-last">Beschreibung</div>
<div class="col-constructor-name even-row-color"><code><a href="#%3Cinit%3E()" class="member-name-link">VillagerTalk</a>()</code></div>
<div class="col-last even-row-color">&nbsp;</div>
</div>
</section>
</li>
<!-- ========== METHOD SUMMARY =========== -->
<li>
<section class="method-summary" id="method-summary">
<h2>Methodenübersicht</h2>
<div id="method-summary-table">
<div class="table-tabs" role="tablist" aria-orientation="horizontal"><button id="method-summary-table-tab0" role="tab" aria-selected="true" aria-controls="method-summary-table.tabpanel" tabindex="0" onkeydown="switchTab(event)" onclick="show('method-summary-table', 'method-summary-table', 3)" class="active-table-tab">Alle Methoden</button><button id="method-summary-table-tab1" role="tab" aria-selected="false" aria-controls="method-summary-table.tabpanel" tabindex="-1" onkeydown="switchTab(event)" onclick="show('method-summary-table', 'method-summary-table-tab1', 3)" class="table-tab">Statische Methoden</button><button id="method-summary-table-tab2" role="tab" aria-selected="false" aria-controls="method-summary-table.tabpanel" tabindex="-1" onkeydown="switchTab(event)" onclick="show('method-summary-table', 'method-summary-table-tab2', 3)" class="table-tab">Instanzmethoden</button><button id="method-summary-table-tab4" role="tab" aria-selected="false" aria-controls="method-summary-table.tabpanel" tabindex="-1" onkeydown="switchTab(event)" onclick="show('method-summary-table', 'method-summary-table-tab4', 3)" class="table-tab">Konkrete Methoden</button></div>
<div id="method-summary-table.tabpanel" role="tabpanel">
<div class="summary-table three-column-summary" aria-labelledby="method-summary-table-tab0">
<div class="table-header col-first">Modifizierer und Typ</div>
<div class="table-header col-second">Methode</div>
<div class="table-header col-last">Beschreibung</div>
<div class="col-first even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code>private void</code></div>
<div class="col-second even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="#changeAmount(java.lang.String,int,net.minecraft.server.network.ServerPlayerEntity,net.minecraft.entity.passive.VillagerEntity,boolean)" class="member-name-link">changeAmount</a><wbr>(<a href="https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/lang/String.html" title="Klasse oder Schnittstelle in java.lang" class="external-link">String</a>&nbsp;itemName,
 int&nbsp;newAmount,
 net.minecraft.server.network.ServerPlayerEntity&nbsp;player,
 net.minecraft.entity.passive.VillagerEntity&nbsp;villager,
 boolean&nbsp;changeEmeraldAmount)</code></div>
<div class="col-last even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4">
<div class="block">Changes the amount of an item or emeralds in a villager's trade offers.</div>
</div>
<div class="col-first odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code>private <a href="VillagerChatData.html" title="Klasse in villagertalk.villagertalk">VillagerChatData</a></code></div>
<div class="col-second odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="#findExistingChat(java.util.UUID,java.util.UUID)" class="member-name-link">findExistingChat</a><wbr>(<a href="https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/util/UUID.html" title="Klasse oder Schnittstelle in java.util" class="external-link">UUID</a>&nbsp;villagerID,
 <a href="https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/util/UUID.html" title="Klasse oder Schnittstelle in java.util" class="external-link">UUID</a>&nbsp;playerID)</code></div>
<div class="col-last odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4">
<div class="block">Finds an existing chat for a player with a villager.</div>
</div>
<div class="col-first even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code>private <a href="https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/lang/String.html" title="Klasse oder Schnittstelle in java.lang" class="external-link">String</a></code></div>
<div class="col-second even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="#generateInitialResponse(net.minecraft.server.network.ServerPlayerEntity)" class="member-name-link">generateInitialResponse</a><wbr>(net.minecraft.server.network.ServerPlayerEntity&nbsp;player)</code></div>
<div class="col-last even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4">
<div class="block">Generates the initial response for a player.</div>
</div>
<div class="col-first odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code>private <a href="https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/lang/String.html" title="Klasse oder Schnittstelle in java.lang" class="external-link">String</a></code></div>
<div class="col-second odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="#generateLLMResponse(java.lang.String,net.minecraft.server.network.ServerPlayerEntity)" class="member-name-link">generateLLMResponse</a><wbr>(<a href="https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/lang/String.html" title="Klasse oder Schnittstelle in java.lang" class="external-link">String</a>&nbsp;prompt,
 net.minecraft.server.network.ServerPlayerEntity&nbsp;player)</code></div>
<div class="col-last odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4">
<div class="block">Generates a response to a chathistory using <a href="#makeAPICall(java.util.List)"><code>makeAPICall(List)</code></a>
 Uses <a href="#findExistingChat(java.util.UUID,java.util.UUID)"><code>findExistingChat(UUID villager, UUID player)</code></a> to find the existing <a href="VillagerChatData.html" title="Klasse in villagertalk.villagertalk"><code>VillagerChatData</code></a> for the player and villager.</div>
</div>
<div class="col-first even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code>private com.theokanning.openai.completion.chat.ChatMessage</code></div>
<div class="col-second even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="#makeAPICall(java.util.List)" class="member-name-link">makeAPICall</a><wbr>(<a href="https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/util/List.html" title="Klasse oder Schnittstelle in java.util" class="external-link">List</a>&lt;com.theokanning.openai.completion.chat.ChatMessage&gt;&nbsp;messages)</code></div>
<div class="col-last even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4">
<div class="block">Makes an API call to the OpenAI API to generate a response to a list of messages, or, if it is a new chat, to generate the initial message.</div>
</div>
<div class="col-first odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code>void</code></div>
<div class="col-second odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="#onInitialize()" class="member-name-link">onInitialize</a>()</code></div>
<div class="col-last odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4">
<div class="block">Entry point for the mod, called when the game is initialized.</div>
</div>
<div class="col-first even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code>private void</code></div>
<div class="col-second even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="#onPlayerVillagerCLose(net.minecraft.server.network.ServerPlayerEntity)" class="member-name-link">onPlayerVillagerCLose</a><wbr>(net.minecraft.server.network.ServerPlayerEntity&nbsp;player)</code></div>
<div class="col-last even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4">
<div class="block">Called when a player closes a villager.</div>
</div>
<div class="col-first odd-row-color method-summary-table method-summary-table-tab1 method-summary-table-tab4"><code>static void</code></div>
<div class="col-second odd-row-color method-summary-table method-summary-table-tab1 method-summary-table-tab4"><code><a href="#onVillagerTradeOpen(net.minecraft.entity.player.PlayerEntity,net.minecraft.entity.passive.VillagerEntity)" class="member-name-link">onVillagerTradeOpen</a><wbr>(net.minecraft.entity.player.PlayerEntity&nbsp;player,
 net.minecraft.entity.passive.VillagerEntity&nbsp;villager)</code></div>
<div class="col-last odd-row-color method-summary-table method-summary-table-tab1 method-summary-table-tab4">
<div class="block">Called when a player opens a villager trade GUI.</div>
</div>
<div class="col-first even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code>private <a href="https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/lang/String.html" title="Klasse oder Schnittstelle in java.lang" class="external-link">String</a></code></div>
<div class="col-second even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="#processLLMResponse(java.lang.String,net.minecraft.server.network.ServerPlayerEntity,net.minecraft.entity.passive.VillagerEntity)" class="member-name-link">processLLMResponse</a><wbr>(<a href="https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/lang/String.html" title="Klasse oder Schnittstelle in java.lang" class="external-link">String</a>&nbsp;response,
 net.minecraft.server.network.ServerPlayerEntity&nbsp;player,
 net.minecraft.entity.passive.VillagerEntity&nbsp;villager)</code></div>
<div class="col-last even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4">
<div class="block">Processes the response from the OpenAI API.</div>
</div>
<div class="col-first odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code>private void</code></div>
<div class="col-second odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="#sendInitialMessage(net.minecraft.server.network.ServerPlayerEntity,java.lang.String)" class="member-name-link">sendInitialMessage</a><wbr>(net.minecraft.server.network.ServerPlayerEntity&nbsp;player,
 <a href="https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/lang/String.html" title="Klasse oder Schnittstelle in java.lang" class="external-link">String</a>&nbsp;message)</code></div>
<div class="col-last odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4">
<div class="block">Sends the initial message of the villager to the player.</div>
</div>
<div class="col-first even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code>private void</code></div>
<div class="col-second even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="#sendResponsePacket(java.lang.String,net.minecraft.server.network.ServerPlayerEntity)" class="member-name-link">sendResponsePacket</a><wbr>(<a href="https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/lang/String.html" title="Klasse oder Schnittstelle in java.lang" class="external-link">String</a>&nbsp;response,
 net.minecraft.server.network.ServerPlayerEntity&nbsp;player)</code></div>
<div class="col-last even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4">
<div class="block">Sends a response to the player</div>
</div>
<div class="col-first odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code>private void</code></div>
<div class="col-second odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="#spawnIronGolem(net.minecraft.server.network.ServerPlayerEntity,net.minecraft.entity.passive.VillagerEntity)" class="member-name-link">spawnIronGolem</a><wbr>(net.minecraft.server.network.ServerPlayerEntity&nbsp;player,
 net.minecraft.entity.passive.VillagerEntity&nbsp;villager)</code></div>
<div class="col-last odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4">
<div class="block">Spawns an iron golem at the villager's location.</div>
</div>
<div class="col-first even-row-color method-summary-table method-summary-table-tab1 method-summary-table-tab4"><code>private static void</code></div>
<div class="col-second even-row-color method-summary-table method-summary-table-tab1 method-summary-table-tab4"><code><a href="#updateTradeGui(net.minecraft.entity.passive.VillagerEntity,int)" class="member-name-link">updateTradeGui</a><wbr>(net.minecraft.entity.passive.VillagerEntity&nbsp;villager,
 int&nbsp;syncInt)</code></div>
<div class="col-last even-row-color method-summary-table method-summary-table-tab1 method-summary-table-tab4">
<div class="block">Updates the trade GUI of a villager.</div>
</div>
</div>
</div>
</div>
<div class="inherited-list">
<h3 id="methods-inherited-from-class-java.lang.Object">Von Klasse geerbte Methoden&nbsp;java.lang.<a href="https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/lang/Object.html" title="Klasse oder Schnittstelle in java.lang" class="external-link">Object</a></h3>
<code><a href="https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/lang/Object.html#clone()" title="Klasse oder Schnittstelle in java.lang" class="external-link">clone</a>, <a href="https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/lang/Object.html#equals(java.lang.Object)" title="Klasse oder Schnittstelle in java.lang" class="external-link">equals</a>, <a href="https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/lang/Object.html#finalize()" title="Klasse oder Schnittstelle in java.lang" class="external-link">finalize</a>, <a href="https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/lang/Object.html#getClass()" title="Klasse oder Schnittstelle in java.lang" class="external-link">getClass</a>, <a href="https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/lang/Object.html#hashCode()" title="Klasse oder Schnittstelle in java.lang" class="external-link">hashCode</a>, <a href="https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/lang/Object.html#notify()" title="Klasse oder Schnittstelle in java.lang" class="external-link">notify</a>, <a href="https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/lang/Object.html#notifyAll()" title="Klasse oder Schnittstelle in java.lang" class="external-link">notifyAll</a>, <a href="https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/lang/Object.html#toString()" title="Klasse oder Schnittstelle in java.lang" class="external-link">toString</a>, <a href="https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/lang/Object.html#wait()" title="Klasse oder Schnittstelle in java.lang" class="external-link">wait</a>, <a href="https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/lang/Object.html#wait(long)" title="Klasse oder Schnittstelle in java.lang" class="external-link">wait</a>, <a href="https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/lang/Object.html#wait(long,int)" title="Klasse oder Schnittstelle in java.lang" class="external-link">wait</a></code></div>
</section>
</li>
</ul>
</section>
<section class="details">
<ul class="details-list">
<!-- ============ FIELD DETAIL =========== -->
<li>
<section class="field-details" id="field-detail">
<h2>Felddetails</h2>
<ul class="member-list">
<li>
<section class="detail" id="LOGGER">
<h3>LOGGER</h3>
<div class="member-signature"><span class="modifiers">public static final</span>&nbsp;<span class="return-type">org.slf4j.Logger</span>&nbsp;<span class="element-name">LOGGER</span></div>
</section>
</li>
<li>
<section class="detail" id="MAYBE_SOME_KEY">
<h3>MAYBE_SOME_KEY</h3>
<div class="member-signature"><span class="modifiers">private static final</span>&nbsp;<span class="return-type"><a href="https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/lang/String.html" title="Klasse oder Schnittstelle in java.lang" class="external-link">String</a></span>&nbsp;<span class="element-name">MAYBE_SOME_KEY</span></div>
<dl class="notes">
<dt>Siehe auch:</dt>
<dd>
<ul class="tag-list">
<li><a href="../../constant-values.html#villagertalk.villagertalk.VillagerTalk.MAYBE_SOME_KEY">Konstantenfeldwerte</a></li>
</ul>
</dd>
</dl>
</section>
</li>
<li>
<section class="detail" id="APIService">
<h3>APIService</h3>
<div class="member-signature"><span class="modifiers">private static final</span>&nbsp;<span class="return-type">com.theokanning.openai.service.OpenAiService</span>&nbsp;<span class="element-name">APIService</span></div>
<div class="block">The OpenAI API service used to generate responses</div>
</section>
</li>
<li>
<section class="detail" id="activeVillagers">
<h3>activeVillagers</h3>
<div class="member-signature"><span class="modifiers">private static final</span>&nbsp;<span class="return-type"><a href="https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/util/Map.html" title="Klasse oder Schnittstelle in java.util" class="external-link">Map</a>&lt;<a href="https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/util/UUID.html" title="Klasse oder Schnittstelle in java.util" class="external-link">UUID</a>,<wbr>net.minecraft.entity.passive.VillagerEntity&gt;</span>&nbsp;<span class="element-name">activeVillagers</span></div>
<div class="block">All villagers that are currently active. Used to get the corresponding villager when a client sends a request.</div>
</section>
</li>
<li>
<section class="detail" id="previousChats">
<h3>previousChats</h3>
<div class="member-signature"><span class="modifiers">private static final</span>&nbsp;<span class="return-type"><a href="https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/util/List.html" title="Klasse oder Schnittstelle in java.util" class="external-link">List</a>&lt;<a href="VillagerChatData.html" title="Klasse in villagertalk.villagertalk">VillagerChatData</a>&gt;</span>&nbsp;<span class="element-name">previousChats</span></div>
<div class="block">All previous chats from the current session. Used to keep track of the chat history for each villager.</div>
</section>
</li>
<li>
<section class="detail" id="CHANGE_EMERALD_AMOUNT">
<h3>CHANGE_EMERALD_AMOUNT</h3>
<div class="member-signature"><span class="modifiers">public static final</span>&nbsp;<span class="return-type"><a href="https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/util/regex/Pattern.html" title="Klasse oder Schnittstelle in java.util.regex" class="external-link">Pattern</a></span>&nbsp;<span class="element-name">CHANGE_EMERALD_AMOUNT</span></div>
</section>
</li>
<li>
<section class="detail" id="CHANGE_ITEM_AMOUNT">
<h3>CHANGE_ITEM_AMOUNT</h3>
<div class="member-signature"><span class="modifiers">public static final</span>&nbsp;<span class="return-type"><a href="https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/util/regex/Pattern.html" title="Klasse oder Schnittstelle in java.util.regex" class="external-link">Pattern</a></span>&nbsp;<span class="element-name">CHANGE_ITEM_AMOUNT</span></div>
</section>
</li>
<li>
<section class="detail" id="SPAWN_GOLEM">
<h3>SPAWN_GOLEM</h3>
<div class="member-signature"><span class="modifiers">public static final</span>&nbsp;<span class="return-type"><a href="https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/util/regex/Pattern.html" title="Klasse oder Schnittstelle in java.util.regex" class="external-link">Pattern</a></span>&nbsp;<span class="element-name">SPAWN_GOLEM</span></div>
</section>
</li>
<li>
<section class="detail" id="COMMANDS">
<h3>COMMANDS</h3>
<div class="member-signature"><span class="modifiers">public static final</span>&nbsp;<span class="return-type"><a href="https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/util/regex/Pattern.html" title="Klasse oder Schnittstelle in java.util.regex" class="external-link">Pattern</a>[]</span>&nbsp;<span class="element-name">COMMANDS</span></div>
</section>
</li>
</ul>
</section>
</li>
<!-- ========= CONSTRUCTOR DETAIL ======== -->
<li>
<section class="constructor-details" id="constructor-detail">
<h2>Konstruktordetails</h2>
<ul class="member-list">
<li>
<section class="detail" id="&lt;init&gt;()">
<h3>VillagerTalk</h3>
<div class="member-signature"><span class="modifiers">public</span>&nbsp;<span class="element-name">VillagerTalk</span>()</div>
</section>
</li>
</ul>
</section>
</li>
<!-- ============ METHOD DETAIL ========== -->
<li>
<section class="method-details" id="method-detail">
<h2>Methodendetails</h2>
<ul class="member-list">
<li>
<section class="detail" id="onInitialize()">
<h3>onInitialize</h3>
<div class="member-signature"><span class="modifiers">public</span>&nbsp;<span class="return-type">void</span>&nbsp;<span class="element-name">onInitialize</span>()</div>
<div class="block">Entry point for the mod, called when the game is initialized.
 <p>
     Registers the networking for the mod. Global receivers for the player's prompt, the initial villager message request, and the villager closed packet.</div>
<dl class="notes">
<dt>Angegeben von:</dt>
<dd><code>onInitialize</code>&nbsp;in Schnittstelle&nbsp;<code>net.fabricmc.api.ModInitializer</code></dd>
</dl>
</section>
</li>
<li>
<section class="detail" id="sendInitialMessage(net.minecraft.server.network.ServerPlayerEntity,java.lang.String)">
<h3>sendInitialMessage</h3>
<div class="member-signature"><span class="modifiers">private</span>&nbsp;<span class="return-type">void</span>&nbsp;<span class="element-name">sendInitialMessage</span><wbr><span class="parameters">(net.minecraft.server.network.ServerPlayerEntity&nbsp;player,
 <a href="https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/lang/String.html" title="Klasse oder Schnittstelle in java.lang" class="external-link">String</a>&nbsp;message)</span></div>
<div class="block">Sends the initial message of the villager to the player.</div>
<dl class="notes">
<dt>Parameter:</dt>
<dd><code>player</code> - The player to send the message to</dd>
<dd><code>message</code> - The message to send</dd>
</dl>
</section>
</li>
<li>
<section class="detail" id="generateInitialResponse(net.minecraft.server.network.ServerPlayerEntity)">
<h3>generateInitialResponse</h3>
<div class="member-signature"><span class="modifiers">private</span>&nbsp;<span class="return-type"><a href="https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/lang/String.html" title="Klasse oder Schnittstelle in java.lang" class="external-link">String</a></span>&nbsp;<span class="element-name">generateInitialResponse</span><wbr><span class="parameters">(net.minecraft.server.network.ServerPlayerEntity&nbsp;player)</span></div>
<div class="block">Generates the initial response for a player.
 Uses <a href="#activeVillagers"><code>activeVillagers</code></a> to get the current actuve villager for the player.
 If the player has an existing chat, it will refresh the system prompt and return the existing chat history.
 Uses <a href="#makeAPICall(java.util.List)"><code>makeAPICall(List)</code></a> to generate the initial message.
 <p>
 If the existing chat is too large to be sent (&gt;= 32_000 byte), a new chat will be started.</div>
<dl class="notes">
<dt>Parameter:</dt>
<dd><code>player</code> - The player that opened the villager</dd>
<dt>Gibt zurück:</dt>
<dd>The initial response</dd>
</dl>
</section>
</li>
<li>
<section class="detail" id="findExistingChat(java.util.UUID,java.util.UUID)">
<h3>findExistingChat</h3>
<div class="member-signature"><span class="modifiers">private</span>&nbsp;<span class="return-type"><a href="VillagerChatData.html" title="Klasse in villagertalk.villagertalk">VillagerChatData</a></span>&nbsp;<span class="element-name">findExistingChat</span><wbr><span class="parameters">(<a href="https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/util/UUID.html" title="Klasse oder Schnittstelle in java.util" class="external-link">UUID</a>&nbsp;villagerID,
 <a href="https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/util/UUID.html" title="Klasse oder Schnittstelle in java.util" class="external-link">UUID</a>&nbsp;playerID)</span></div>
<div class="block">Finds an existing chat for a player with a villager.
 Returns null if no chat is found.</div>
<dl class="notes">
<dt>Parameter:</dt>
<dd><code>villagerID</code> - The UUID of the villager</dd>
<dd><code>playerID</code> - The UUID of the player</dd>
<dt>Gibt zurück:</dt>
<dd>The existing chat, or null if no chat is found</dd>
</dl>
</section>
</li>
<li>
<section class="detail" id="makeAPICall(java.util.List)">
<h3>makeAPICall</h3>
<div class="member-signature"><span class="modifiers">private</span>&nbsp;<span class="return-type">com.theokanning.openai.completion.chat.ChatMessage</span>&nbsp;<span class="element-name">makeAPICall</span><wbr><span class="parameters">(<a href="https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/util/List.html" title="Klasse oder Schnittstelle in java.util" class="external-link">List</a>&lt;com.theokanning.openai.completion.chat.ChatMessage&gt;&nbsp;messages)</span></div>
<div class="block">Makes an API call to the OpenAI API to generate a response to a list of messages, or, if it is a new chat, to generate the initial message.</div>
<dl class="notes">
<dt>Parameter:</dt>
<dd><code>messages</code> - The messages to generate a response to</dd>
<dt>Gibt zurück:</dt>
<dd>The generated response as a <code>ChatMessage</code></dd>
</dl>
</section>
</li>
<li>
<section class="detail" id="onPlayerVillagerCLose(net.minecraft.server.network.ServerPlayerEntity)">
<h3>onPlayerVillagerCLose</h3>
<div class="member-signature"><span class="modifiers">private</span>&nbsp;<span class="return-type">void</span>&nbsp;<span class="element-name">onPlayerVillagerCLose</span><wbr><span class="parameters">(net.minecraft.server.network.ServerPlayerEntity&nbsp;player)</span></div>
<div class="block">Called when a player closes a villager.
 Removes the player from <a href="#activeVillagers"><code>activeVillagers</code></a></div>
<dl class="notes">
<dt>Parameter:</dt>
<dd><code>player</code> - The player that closed the villager</dd>
</dl>
</section>
</li>
<li>
<section class="detail" id="generateLLMResponse(java.lang.String,net.minecraft.server.network.ServerPlayerEntity)">
<h3>generateLLMResponse</h3>
<div class="member-signature"><span class="modifiers">private</span>&nbsp;<span class="return-type"><a href="https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/lang/String.html" title="Klasse oder Schnittstelle in java.lang" class="external-link">String</a></span>&nbsp;<span class="element-name">generateLLMResponse</span><wbr><span class="parameters">(<a href="https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/lang/String.html" title="Klasse oder Schnittstelle in java.lang" class="external-link">String</a>&nbsp;prompt,
 net.minecraft.server.network.ServerPlayerEntity&nbsp;player)</span></div>
<div class="block">Generates a response to a chathistory using <a href="#makeAPICall(java.util.List)"><code>makeAPICall(List)</code></a>
 Uses <a href="#findExistingChat(java.util.UUID,java.util.UUID)"><code>findExistingChat(UUID villager, UUID player)</code></a> to find the existing <a href="VillagerChatData.html" title="Klasse in villagertalk.villagertalk"><code>VillagerChatData</code></a> for the player and villager.
 Refreshes the system prompt and adds the player's prompt to the chat history.
 Then generates a response and adds it to the chat history.</div>
<dl class="notes">
<dt>Parameter:</dt>
<dd><code>prompt</code> - The prompt to generate a response to</dd>
<dd><code>player</code> - The <code>ServerPlayerEntity</code> that sent the prompt</dd>
<dt>Gibt zurück:</dt>
<dd>The formatted generated response or an error message if no existing chat is found.</dd>
</dl>
</section>
</li>
<li>
<section class="detail" id="processLLMResponse(java.lang.String,net.minecraft.server.network.ServerPlayerEntity,net.minecraft.entity.passive.VillagerEntity)">
<h3>processLLMResponse</h3>
<div class="member-signature"><span class="modifiers">private</span>&nbsp;<span class="return-type"><a href="https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/lang/String.html" title="Klasse oder Schnittstelle in java.lang" class="external-link">String</a></span>&nbsp;<span class="element-name">processLLMResponse</span><wbr><span class="parameters">(<a href="https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/lang/String.html" title="Klasse oder Schnittstelle in java.lang" class="external-link">String</a>&nbsp;response,
 net.minecraft.server.network.ServerPlayerEntity&nbsp;player,
 net.minecraft.entity.passive.VillagerEntity&nbsp;villager)</span></div>
<div class="block">Processes the response from the OpenAI API.
 <p>
     Processes the response to check for any commands, such as changing the amount of emeralds or items, or spawning an iron golem.
     If a command is found, it calls <a href="#spawnIronGolem(net.minecraft.server.network.ServerPlayerEntity,net.minecraft.entity.passive.VillagerEntity)"><code>spawnIronGolem(ServerPlayerEntity, VillagerEntity)</code></a>,
     
<details class="invalid-tag">
<summary>ungültiges @link</summary>
<pre>{@link VillagerTalk#changeAmount(String itemName, int newAmount, ServerPlayerEntity, VillagerEntity, boolean true)</pre>
</details>
}, or
     
<details class="invalid-tag">
<summary>ungültiges @link</summary>
<pre>{@link VillagerTalk#changeAmount(String itemName, int newAmount, ServerPlayerEntity, VillagerEntity, boolean false)</pre>
</details>
} and removes the command from the response.
 </p></div>
<dl class="notes">
<dt>Parameter:</dt>
<dd><code>response</code> - The response to process</dd>
<dd><code>player</code> - The player that sent the prompt</dd>
<dd><code>villager</code> - The villager that the player is talking to</dd>
<dt>Gibt zurück:</dt>
<dd>The processed response</dd>
</dl>
</section>
</li>
<li>
<section class="detail" id="changeAmount(java.lang.String,int,net.minecraft.server.network.ServerPlayerEntity,net.minecraft.entity.passive.VillagerEntity,boolean)">
<h3>changeAmount</h3>
<div class="member-signature"><span class="modifiers">private</span>&nbsp;<span class="return-type">void</span>&nbsp;<span class="element-name">changeAmount</span><wbr><span class="parameters">(<a href="https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/lang/String.html" title="Klasse oder Schnittstelle in java.lang" class="external-link">String</a>&nbsp;itemName,
 int&nbsp;newAmount,
 net.minecraft.server.network.ServerPlayerEntity&nbsp;player,
 net.minecraft.entity.passive.VillagerEntity&nbsp;villager,
 boolean&nbsp;changeEmeraldAmount)</span></div>
<div class="block">Changes the amount of an item or emeralds in a villager's trade offers.
 <p>
     Uses <code>MerchantEntity.getOffers()</code> to get the current trade offers of the villager.
     Iterates through the trade offers and changes the amount of the item or emeralds.
     Then sets the new trade offers and updates the trade GUI using <a href="#updateTradeGui(net.minecraft.entity.passive.VillagerEntity,int)"><code>updateTradeGui(VillagerEntity, int)</code></a>.
 </p></div>
<dl class="notes">
<dt>Parameter:</dt>
<dd><code>itemName</code> - The name of the item in the trade to change the amount of</dd>
<dd><code>newAmount</code> - The new amount of the item</dd>
<dd><code>player</code> - The player that sent the command</dd>
<dd><code>villager</code> - The villager to change the trade offers of</dd>
<dd><code>changeEmeraldAmount</code> - true: changes the emerald amount in the trade with the item, false: changes the item amount in the trade with the item</dd>
</dl>
</section>
</li>
<li>
<section class="detail" id="spawnIronGolem(net.minecraft.server.network.ServerPlayerEntity,net.minecraft.entity.passive.VillagerEntity)">
<h3>spawnIronGolem</h3>
<div class="member-signature"><span class="modifiers">private</span>&nbsp;<span class="return-type">void</span>&nbsp;<span class="element-name">spawnIronGolem</span><wbr><span class="parameters">(net.minecraft.server.network.ServerPlayerEntity&nbsp;player,
 net.minecraft.entity.passive.VillagerEntity&nbsp;villager)</span></div>
<div class="block">Spawns an iron golem at the villager's location.
 <p>
     Uses <code>EntityType.IRON_GOLEM</code> to create a new iron golem entity at the villager's location.
     Spawns the iron golem in the world and sets the player as the target of the iron golem.
 </p></div>
<dl class="notes">
<dt>Parameter:</dt>
<dd><code>player</code> - The player that should be targeted</dd>
<dd><code>villager</code> - The villager to spawn the iron golem at</dd>
</dl>
</section>
</li>
<li>
<section class="detail" id="updateTradeGui(net.minecraft.entity.passive.VillagerEntity,int)">
<h3>updateTradeGui</h3>
<div class="member-signature"><span class="modifiers">private static</span>&nbsp;<span class="return-type">void</span>&nbsp;<span class="element-name">updateTradeGui</span><wbr><span class="parameters">(net.minecraft.entity.passive.VillagerEntity&nbsp;villager,
 int&nbsp;syncInt)</span></div>
<div class="block">Updates the trade GUI of a villager.
 <p>
     Refreshes the TradingGUI by sending the trade offers to the player.
 </p></div>
<dl class="notes">
<dt>Parameter:</dt>
<dd><code>villager</code> - The villager to update the trade GUI of</dd>
<dd><code>syncInt</code> - The sync ID of the trade GUI</dd>
</dl>
</section>
</li>
<li>
<section class="detail" id="sendResponsePacket(java.lang.String,net.minecraft.server.network.ServerPlayerEntity)">
<h3>sendResponsePacket</h3>
<div class="member-signature"><span class="modifiers">private</span>&nbsp;<span class="return-type">void</span>&nbsp;<span class="element-name">sendResponsePacket</span><wbr><span class="parameters">(<a href="https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/lang/String.html" title="Klasse oder Schnittstelle in java.lang" class="external-link">String</a>&nbsp;response,
 net.minecraft.server.network.ServerPlayerEntity&nbsp;player)</span></div>
<div class="block">Sends a response to the player</div>
<dl class="notes">
<dt>Parameter:</dt>
<dd><code>response</code> - The response to send</dd>
<dd><code>player</code> - The player to send the response to</dd>
</dl>
</section>
</li>
<li>
<section class="detail" id="onVillagerTradeOpen(net.minecraft.entity.player.PlayerEntity,net.minecraft.entity.passive.VillagerEntity)">
<h3>onVillagerTradeOpen</h3>
<div class="member-signature"><span class="modifiers">public static</span>&nbsp;<span class="return-type">void</span>&nbsp;<span class="element-name">onVillagerTradeOpen</span><wbr><span class="parameters">(net.minecraft.entity.player.PlayerEntity&nbsp;player,
 net.minecraft.entity.passive.VillagerEntity&nbsp;villager)</span></div>
<div class="block">Called when a player opens a villager trade GUI.
 <p>
     Clears the special prices of the villager to remove vanilla discounts.
     Updates the trade GUI using <a href="#updateTradeGui(net.minecraft.entity.passive.VillagerEntity,int)"><code>updateTradeGui(VillagerEntity, int)</code></a>.
     Adds the villager to <a href="#activeVillagers"><code>activeVillagers</code></a>.
 </p></div>
<dl class="notes">
<dt>Parameter:</dt>
<dd><code>player</code> - The player that opened the trade GUI</dd>
<dd><code>villager</code> - The villager that the player is trading with</dd>
</dl>
</section>
</li>
</ul>
</section>
</li>
</ul>
</section>
<!-- ========= END OF CLASS DATA ========= -->
</main>
</div>
</div>
</body>
</html>
